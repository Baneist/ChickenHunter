# ChickenHunter 项目文档

> 同济大学2020年高级程序设计课程大项目

## 项目信息介绍

- 项目名：**鸡地求生**
- 项目成员：
  - 成笑行 2053302
  - 王钧涛 2050254
  - 何懿励 2050255
- 小组成员贡献比例

| 姓名   | 分工                                           | 贡献比例 |
| :----- | ---------------------------------------------- | -------- |
| 成笑行 | 界面效果，素材收集，武器，实现安卓端、手柄     | 100%     |
| 王钧涛 | 实现联网功能 ，地图生成                        | 100%     |
| 何懿励 | 交互设计，动画动作，敌人AI，物品设计，攻击效果 | 100%     |

- 项目Github地址： <https://github.com/vozeo/ChickenHunter>
- 项目进度时间线
  - 2020-05-04
    - 学习cocos2dx
  - 2020-05-19
    - 添加地图
  - 2020-05-22
    - 添加人物动画与动作
  - 2020-05-23
    - 添加UI界面
  - 2020-05-26
    - 添加地图障碍层
  - 2020-06-06
    - 添加子弹
    - 添加武器
  - 2020-06-07
    - 切换武器
    - 安卓端设计，增加触摸与键盘功能
  - 2020-06-08
    - 设计并添加物品类
    - 拾起物品
    - 添加音效
  - 2020-06-10
    - 添加敌人AI
  - 2020-06-11
    - 添加yasio库，设计联网功能
    - 添加退出界面，音量调节功能
  - 2020-06-12
    - 使yasio适配安卓端
    - 添加服务器移动
    - 增加受伤特效
    - 添加房间功能
    - 添加游戏结算与排行榜功能
  - 2020-06-14
    - 设计武器属性
    - 添加散射攻击效果
    - 添加服务器按键回传
    - 添加开局bonus抽选功能
  - 2020-06-15
    - 完成联网地图位置同步
    - 增加设置按钮
  - 2020-06-16
    - 添加安卓端多点触摸功能
    - 绘制新地图
    - 添加联机武器系统
    - 添加手榴弹武器和粒子特效
  - 2020-06-17
    - 添加安卓端联机自动拾取功能



## 项目开发文档

- 选用引擎：**Cocos2d-x 4.0**
- 辅助软件：Photoshop，Tiled map，TexturePackerGUI
- 支持平台：Windows，Android
- 小组分工

| 姓名   | 分工                                           | 贡献比例 |
| :----- | ---------------------------------------------- | :------- |
| 成笑行 | 界面效果，素材收集，武器，实现安卓端、手柄     | 100%     |
| 王钧涛 | 实现联网功能 ，地图生成                        | 100%     |
| 何懿励 | 交互设计，动画动作，敌人AI，物品设计，攻击效果 | 100%     |

- **实现的功能点及实现思路**

  - 基础功能
    - [x] 游戏开始界面、背景音乐、退出功能、计时系统、障碍物边界
    - [x] 创建和加入房间，添加AI与其他玩家
      - <font color=red>实现思路：</font>
    - [x] 键盘控制人物走动、翻滚，鼠标控制人物射击与射击方向
      - 使用registerTouchEvent()与registerKeyboardEvent()监视鼠标与键盘的操作
      - 在update()函数中控制人物移动，在自定义schedule中实现定时发射子弹
      - w/a/s/d移动方向，单击或长按鼠标左键射击，空格键翻滚
    - [x] 支持武器、弹药掉落和拾取
      - 玩家行走到道具位置，按下E键拾取
      - AI每一帧判断是否在当前位置有道具可拾取，自动拾取
      - 拾取weapon时先retain，再从地图上移除weapon，将其存入hunter武器库
      - 拾取弹药箱和医疗包时从地图上移除，并即时为人物增加弹药量和血量
    - [x] 支持积分系统
      - 玩家胜利或死亡后呈现结算界面，按照人物死亡先后顺序进行排序

  

  - 可选功能
    - [x] 游戏音量设置
      - 使用slider控件滑动按钮，获取音量值并使用AudioEngine设置音量
    - [x] bonus机制
      - 开局抽选bonus：提升人物125%的攻击力，提升血量上限至120，提升防御力使血量减少值为原来的0.8倍，提升子弹攻速为每发间隔0.26s
    - [ ] 多类AI
    - [ ] 排行榜系统
    - [ ] 外挂



- **<font color=red>项目的技术难点及解决过程</font>**



- **创新点/亮点**
  - 可在安卓端运行
    - <font color=red>实现思路</font>
  - 可使用手柄进行游戏
    - <font color=red>实现思路</font>
  - 手榴弹武器
    - 使用方法：预估敌人的位置并点击该位置。前摇为在此位置投射爆炸范围圆圈，0.5s后手榴弹爆炸，范围内敌人根据离爆炸中心的距离受到不同程度的伤害
    - 使用粒子系统中的ParticleExplosion完成爆炸动画
  - 散射枪
    - 可以在地图中拾取散射枪，一次射出3发子弹，每一发子弹的方向相差atan(0.15)度



- **项目运行截图**

![001](D:\Personal\Desktop\001.png)

![005](D:\Personal\Desktop\005.png)

![003](D:\Personal\Desktop\003.png)
